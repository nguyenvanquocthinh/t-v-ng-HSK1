<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chinese Audio Player</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
        background: #f9f9f9;
      }
      .controls {
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
      }
      button {
        padding: 10px;
        border: none;
        border-radius: 6px;
        background: #4caf50;
        color: white;
        cursor: pointer;
      }
      .text-box {
        margin-top: 20px;
        background: white;
        padding: 15px;
        border-radius: 10px;
        max-width: 400px;
        margin: auto;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      .word {
        cursor: pointer;
        padding: 2px 4px;
        border-radius: 4px;
      }
      .word:hover {
        background: #e6f7ff;
      }
      .tooltip {
        margin-top: 10px;
        font-size: 14px;
        color: #333;
        background: #f0f0f0;
        padding: 8px;
        border-radius: 6px;
        display: none;
      }
    </style>
  </head>
  <body>
    <h2>üéß T·ª´ v·ª±ng ti·∫øng Trung HSK 1</h2>

    <audio id="audioPlayer" controls></audio>

    <div class="controls">
      <button onclick="prevAudio()">‚èÆ Tr∆∞·ªõc</button>
      <button onclick="togglePlay()">‚ñ∂Ô∏è / ‚è∏</button>
      <button onclick="nextAudio()">‚è≠ Ti·∫øp</button>
    </div>

    <div class="text-box" id="lessonText"></div>
    <div class="tooltip" id="tooltip"></div>

    <script>
      const lessons = [
        {
          audio: "./audio/audio1.mp3",
          chinese: "Êàë ÊòØ Â≠¶Áîü",
          pinyin: "W«í sh√¨ xu√©shƒìng.",
          vietnamese: "T√¥i l√† h·ªçc sinh / sinh vi√™n.",
          words: {
            Êàë: { meaning: "t√¥i", audio: "./audio/w«í.mp3" },
            ÊòØ: { meaning: "l√†", audio: "./audio/sh√¨.mp3" },
            Â≠¶Áîü: {
              meaning: "h·ªçc sinh,sinh vi√™n",
              audio: "./audio/xu√©shƒìng.mp3",
            },
          },
        },
        {
          audio: "./audio/audio2.mp3",
          chinese: "Êàë‰ª¨ Âéª Â≠¶Ê†°",
          pinyin: "W«ímen q√π xu√©xi√†o.",
          vietnamese: "Ch√∫ng t√¥i ƒëi ƒë·∫øn tr∆∞·ªùng.",
          words: {
            Êàë‰ª¨: { meaning: "ch√∫ng t√¥i", audio: "./audio/W«ímen.mp3" },
            Âéª: { meaning: "ƒëi", audio: "./audio/q√π.mp3" },
            Â≠¶Ê†°: { meaning: "tr∆∞·ªùng h·ªçc", audio: "./audio/xu√©xi√†o.mp3" },
          },
        },
        {
          audio: "./audio/audio3.mp3",
          chinese: "‰Ω† Âè´ ‰ªÄ‰πà Ôºü",
          pinyin: "N«ê ji√†o sh√©nme?",
          vietnamese: "B·∫°n t√™n l√† g√¨?",
          words: {
            ‰Ω†: { meaning: "b·∫°n", audio: "./audio/n«ê.mp3" },
            Âè´: { meaning: "g·ªçi,t√™n l√†", audio: "./audio/ji√†o.mp3" },
            ‰ªÄ‰πà: { meaning: "g√¨", audio: "./audio/sh√©nme.mp3" },
          },
        },
      ];

      let currentIndex = 0;
      const audioPlayer = document.getElementById("audioPlayer");
      const lessonText = document.getElementById("lessonText");
      const tooltip = document.getElementById("tooltip");
      let wordAudio = new Audio();

      function loadAudio(index) {
        audioPlayer.src = lessons[index].audio;
        audioPlayer.play();
        renderText(index);
      }

      function renderText(index) {
        const lesson = lessons[index];
        let chineseWords = lesson.chinese
          .split(" ")
          .map((w) => {
            return `<span class="word" onclick="showMeaning('${w}')">${w}</span>`;
          })
          .join(" ");

        lessonText.innerHTML = `
        <b>‰∏≠Êñá:</b> ${chineseWords}<br>
        <b>Pinyin:</b> ${lesson.pinyin}<br>
        <b>Ti·∫øng Vi·ªát:</b> ${lesson.vietnamese}
      `;
        tooltip.style.display = "none";
      }

      function showMeaning(word) {
        const lesson = lessons[currentIndex];
        if (lesson.words[word]) {
          tooltip.innerHTML = `<b>${word}</b>: ${lesson.words[word].meaning}`;
          tooltip.style.display = "block";

          // ph√°t √¢m thanh t·ª´
          wordAudio.src = lesson.words[word].audio;
          wordAudio.play();
        } else {
          tooltip.innerHTML = `<b>${word}</b>: Ch∆∞a c√≥ nghƒ©a`;
          tooltip.style.display = "block";
        }
      }

      function togglePlay() {
        if (audioPlayer.paused) audioPlayer.play();
        else audioPlayer.pause();
      }

      function nextAudio() {
        currentIndex = (currentIndex + 1) % lessons.length;
        loadAudio(currentIndex);
      }

      function prevAudio() {
        currentIndex = (currentIndex - 1 + lessons.length) % lessons.length;
        loadAudio(currentIndex);
      }

      // load ƒë·∫ßu ti√™n
      loadAudio(currentIndex);
    </script>
  </body>
</html>
